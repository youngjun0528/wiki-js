---
title: 03.Spring5
description: 
published: true
date: 2021-05-14T03:21:49.727Z
tags: 
editor: markdown
dateCreated: 2021-05-14T00:01:30.145Z
---

## 스프링 제어의 역전(IoC)과 의존성 주입(DI)
### 빈(Bean)
스프링 컨테이너가 관리하는 객체

### Java 객체 의존성 관리
1. 객체가 직접 의존 관계에 있는 객체들의 생성자를 호출
```java
public class RegService(){
	private MSender mSender;
  public RegService(){
  	// 의존하는 객체를 인스턴스화 한다.
    this.mSender = new MSender();
  }
}
```
2. Look-Up 패턴을 활용해 의존성을 찾아 배치
```java
public class RegService(){
	private MSender mSender;
  public RegService(MSender mSender){
  	this.mSender = mSender;
  }
}

```
위의 RegService에서는 객체의 의존성을 제어하지 못하고, 스프링이 객체의 인스턴스화가 이루어진다.
이를 제어의 역전(Inversion of Control, IoC) 라고 한다.


### 어노테이션 기반의 설정

#### 빈 선언
1. @Component : 제네릭 스테레오 타입, 해당 클래스를 인스턴스화 한다.
2. @Service : 컴포넌트 어노테이션을 특수화 한 것으로 서비스 영역에서 선언한다.
3. @Repository : DAO(Data Sccess Object)를 나타낸다.
4. @Controller : 컴포넌트가 HTTP 요청을 받을 수 있는 Web 컨트롤러 임을 나타낸다.

#### 의존성 주입
반드시 필요한 의존선을 생성자를 통해 주입해야 마며, 최초 주입된 이후 의존성을 ReadOnly 상태이다.
선택적인 의존성을 세터/메소드를 통해 주입할 수 있다. 필드 기반 기반 주입은 지양한다.
1. 생성자 기반의 주입 : 생성자에 @Autowired 적용
```java
@Autowired
public MsgService(MsgRepository repo){
	this.repo = repo
}
```
2. 세터 기반/메소드 기반의 주입 : 메소드 선언 후 @Autowired 또는 @Required 적용
```java
@Required
public void setMsgService(MsgRepository repo){
	this.repo = repo
}
```
3. 핃드 기반의 주입 : 이 방법 사용시 세터 메소드는 별도 선언할 필요가 없다.
```java
@Autowired
private MsgRepository repo
```
